-- Generated by Twitch viewer AusCryptor using OpanAI ChatGPT

local parse = {}

function parse_file_size(sizeStr)
  -- Trim the string to avoid whitespace issues
  local trimmed = sizeStr:lower():match("^%s*(.-)%s*$")

  -- Match the numeric part and the unit
  local num, unit = trimmed:match("^(%d+%.?%d*)%s*([kmgtpi].b?)$")
  num = tonumber(num)

  -- Return nil if there is no numeric part or unit
  if not num or not unit then return nil end

  -- Define the multipliers for each unit
  local multipliers = {
    b = 1,
    kb = 1024,
    kib = 1024,
    mb = 1024 ^ 2,
    mib = 1024 ^ 2,
    gb = 1024 ^ 3,
    gib = 1024 ^ 3,
    tb = 1024 ^ 4,
    tib = 1024 ^ 4,
    pb = 1024 ^ 5,
    pib = 1024 ^ 5 -- adding petabyte for completeness
  }

  -- Calculate the number of bytes
  local multiplier = multipliers[unit]
  if not multiplier then
    return nil
  end

  return num * multiplier
end

parse.file_size = parse_file_size

return parse